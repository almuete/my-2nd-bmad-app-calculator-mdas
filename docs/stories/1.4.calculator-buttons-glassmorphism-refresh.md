# Story 1.4 â€“ Calculator Buttons Glassmorphism Refresh

## Status
Done

### Context

- Plan: `docs/plan/client/calculator-buttons-glassmorphism-refresh.md`
- Scope: Style-only update for calculator buttons under `components/calculator/*`. No behavior changes.

### User story

As a calculator user, I want clear, modern-looking glass-style buttons so that the interface feels polished and provides clear focus and interaction feedback in both light and dark modes.

### Acceptance criteria

- [x] Operator and action buttons use a blue-tinted glass style; number keys remain neutral glass.
- [x] Keyboard focus ring is visible and consistent (`focus-visible:ring-2 ring-blue-600`) across variants and themes.
- [x] Labels meet readability expectations in both light and dark modes; no regressions in button layout or spacing.
- [x] Unit tests pass and visual snapshots are reviewed/updated for Desktop and Mobile Chrome baselines.
- [x] QA gate `docs/qa/gates/1.4-glassmorphism-refresh.yml` passes with glass/tint acceptance.

### Dependencies

- Tailwind theme tokens per `docs/architecture/02-tailwind-theme-tokens.md`.
- Responsiveness guidelines per `docs/architecture/05-responsiveness.md`.
- `backdrop-blur` support; graceful degradation is acceptable where unsupported (no functional regressions).

### Tasks and sub-tasks

- Dev
  - Update `components/calculator/Key.tsx` base styles with subtle blur, transition, and soft shadow.
  - Implement glass variants: neutral glass for number keys; blue-tinted glass for operator/action; preserve strong focus states.
  - Ensure no changes in `Keypad.tsx`, `OperatorPad.tsx`, `ActionBar.tsx` usage.
- QA
  - Run unit tests (Vitest) and ensure all pass.
  - Run Playwright visual tests for Desktop/Mobile Chrome; update snapshots in a single coordinated change.
  - Execute QA gate `docs/qa/gates/1.3-operator-action-color.yml` with glass/tint acceptance.
  - Manual verification (light/dark): label readability, focus visibility, hover/active feedback.
- Docs
  - Update `docs/stories/1.3.operator-and-action-button-color-update.md` to mention glassmorphism redesign and blue tint.
  - Update `docs/qa/gates/1.3-operator-action-color.yml` with translucency notes if needed.
  - Add release note to `docs/RELEASE_NOTES.md` summarizing the refresh.
- Approvals
  - Design sign-off on glass/tint in light/dark.
  - QA sign-off on unit + visual tests.
  - PO sign-off on staging.

### Estimates

- Dev: 0.5 day
- QA: 0.5 day
- Docs: 0.25 day

### Risks & mitigations

- Contrast/readability on varied backgrounds: validate light/dark; tune tint/opacity if needed.
- Performance impact from blur on low-end devices: keep `backdrop-blur-sm`, profile on mobile; reduce blur if jank occurs.
- Visual test churn: coordinate snapshot updates in a single PR to reduce flakiness.

### Definition of Done

- All acceptance criteria met across light and dark modes.
- Unit tests passing; visual snapshots updated and approved.
- QA gate passes; approvals checklist completed (Design, QA, PO).
- Documentation updated (story, QA gate notes if any, release notes).
- Changes merged to main and verified on staging.

### Rollback

- Revert edits in `components/calculator/Key.tsx` to previous solid-blue styles.
- Restore Playwright snapshots to prior baseline.

